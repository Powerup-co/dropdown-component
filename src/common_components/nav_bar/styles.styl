@import '~common_styles/colors.styl'
@import '~common_styles/screen_size.styl'

$nav-bar-max-width = $screen-xxl - 2 * 165px

.nav-bar-bg
    background: $white
    box-shadow: 0px 4px 25px rgba($black, 0.15)

.nav-bar-wrapper
    display: flex
    align-items: center
    justify-content: center
    position: relative
    max-width: $nav-bar-max-width
    margin-left: auto
    margin-right: auto

    @media(max-width: $nav-bar-max-width)
        margin-left: 10px
        margin-right: 10px

    &
    *
        box-sizing: border-box
        outline: none

.nav-bar-left-block
.nav-bar-right-block
    position: absolute
    display: flex
    align-items: center

.nav-bar-left-block
    left: 0

.nav-bar-right-block
    right: 0

.nav-bar
    display: flex
    align-items: center

    > .nav-bar-link
        margin-top: 33px
        padding-bottom: @margin-top
        &:first-child
            margin-left: 0
        &:before
            bottom: @margin-top - 1px

.show-sub-nav-bar-content
    max-height: 100vh
    > *
        transition: transform 0.3s 0.4s, opacity 0.7s 0.4s
        transform: translateY(0)
        opacity: 1

.sub-nav-bar
    position: absolute
    top: 100%
    left: 50%
    transform: translateX(-50%)
    width: 100vw
    background: $white
    display: flex
    flex-direction: column
    align-items: center
    max-height: 0
    transition: max-height 0.7s
    overflow: hidden

    > *
        transform: translateY(-100px)
        opacity: 0

    &:hover
        @extend .show-sub-nav-bar-content

    .sub-nav-bar-row-wrapper
        display: flex
        justify-content: space-between
        margin: 30px 0

    .sub-nav-bar-row
        display: flex

    .sub-nav-bar-col
        display: flex
        flex-direction: column
        min-width: 100px
        :last-child .sub-nav-bar-link
            margin: 0

.nav-bar-link
    margin-left: 25px
    display: flex
    transition: color 0.3s
    &.sub-nav-bar-link
        display: inline-block
        margin: 0 0 15px
        font-size: 10px
        p&
            pointer-events: none
    &.active:before
        opacity: 1
    &.not-active
        color: $dusty-gray
    &:hover + .sub-nav-bar
        @extend .show-sub-nav-bar-content

.recently-viewed
.custom-row
    > p
        font-family: 'Univers LT Pro', sans-serif
        font-weight: 700
        font-size: 12px
        margin-top: 0

    margin-bottom: 30px

    .recently-viewed-link-list
        display: flex

.shopping-bag-icon
    margin-left: 15px
    position: relative
    &.with-notification-dot:after
        content: ''
        position: absolute
        background: $carmine-pink
        width: 3px
        height: @width
        border-radius: 100%
        left: calc(100% + 1px)
        top: 1px

.search-simple-block
    display: flex
    align-items: center
    position: relative

    .search-icon
        .spinner
            display: none

    .search-icon
    .search-field
    .search-result
        position: absolute
        right: 0
        transition-property: width, right
        transition-duration: 0.3s

    .search-result
        background: $white
        border-radius: 0 0 20px 20px
        width: 0
        padding: 0
        color: $white
        height: max-content
        flex-direction: column
        top: 27px
        width: 0
        padding: 12px 20px
        border: 1px solid $alto
        visibility: hidden
        pointer-events: none
        overflow: hidden

        .search-link-wrapper
            display: flex
            align-items: center
            &:not(&:last-child)
                margin-bottom: 18px

            .search-link
                text-overflow: ellipsis
                overflow: hidden
                white-space: nowrap

            .icon
                margin-right: 6px
                margin-top: -1px
                min-width: 16px
                min-height: @min-width
                *
                    stroke: $black
                    stroke-width: 2px

    .search-field
        background: $white
        border: none
        border-radius: 20px
        width: 0
        padding: 0
        color: $white

        &:focus
            padding: 19px 35px 17px 18px
            width: 200px
            border: 1px solid $alto
            position: absolute
            right: -36px
            z-index: 1
            color: $black

            & ~ .search-icon
                position: absolute
                pointer-events: none
                right: @right + 15px
                z-index: 1
                *
                    stroke: $black

            & ~ .search-result
                right: @right
                z-index: 1
                bottom: 0
                display: flex
                width: 200px
                visibility: visible
                pointer-events: all

    &.search-in-progress
        .search-icon
            .icon
                display: none
            .spinner
                display: block

    &.search-with-results
        .search-field
            border-radius: 20px 20px 0 0
